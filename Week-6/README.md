# Card cycle tester

## Description
I had a different project in mind when we started this class but it would require a bit more time that what we have left of class. So instead I thought it would be a good idea to improve an old project I had done for my job. We make Point of Sale systems and with that it means lots of card reader devices. One thing we like to verify on all the card readers is that the swipe and dip slots for the cards can live up to repeated use. So early on when I started there I hacked together a very janky card cycle tester using some actuators and an arduino. It's been used quite a bit over the years and despite how terrible of a setup it is it gets the job done. So for the final project I'd like to condense the systems down to a single board with no external controls or monitors. 

### Current setup
Below is our current setup. The main components here are the Arduino, L298N motor controller, a 12V actuator and a 12V switching power supply (out of frame). The code on the arduino is very simple and just toggles two GPIOs to control the push / pull direction on the actuator. There's a delay set to control how long to hold either the push or pull direction. A quirk of the hardware I had found was that the gearing of the actuator could sometimes slip and you would end up with the arm extending further than you had intended after a couple hundred cycles. To counter this I usually made sure that when pulling the delay was set long enough that the arm would retract as far as possible to reset itself. 

The messy part of this system right now is that we needed a way to read the counter for how many cycles have been completed. Since originally I didn't have a ton of time and I happened to have a raspberry pi laying around... that ended up being the solution. I used putty to open a serial connection between the Pi and the arduino. This let me just dump the counter out to the serial port and also had the added benefit of giving some direct control via console commands. The Pi also served as a nice hub to conntect to multiple arduinos all running different Cycle testers in slightly different configurations and I was able to modify code if needed from the Pi. 

![annotated cycle tester](https://user-images.githubusercontent.com/2941745/167262852-5c5f3b19-d037-494a-a7e6-58a828c51e95.png)

### The goal
I want to get this all down to one board and I'd like to completely remove the Pi as a serial monitor. The final design uses an LCD to display your cycle count and uses button inputs so that the user can adjust the push/pull timing on the fly for when they need to modify the test setup. It also now includes an emergency stop (it's machinery afterall). As a stretch goal I'd like to expand the functionality from the having it power on and start cycling to instead having a control menu that can be navigated through the LCD which will have your functions like start/stop and timer settings but also a way to enable a set limit so that it can just automatically stop after X loops if needed. 
